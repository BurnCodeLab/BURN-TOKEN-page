<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>$BURN Token ðŸ”¥</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">

  <!-- Include Solana Dependencies -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/solana-web3.js/1.76.0/solana-web3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@solana/spl-token@0.2.0/lib/index.iife.min.js"></script>

  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><text y='20' font-size='24'>ðŸ”¥</text></svg>" type="image/svg+xml">
</head>
<body>
  <!-- Animated Background -->
  <div class="grid-background"></div>

  <!-- Hero Section -->
  <header class="hero">
    <h1 class="glow-text">$BURN TOKEN ðŸ”¥</h1>
    <p class="slogan glow-text">Letâ€™s Burn This Token to the Ground</p>
    <p class="burn-instruction">Only burns of exactly <strong>69420 $BURN</strong> tokens will count.</p>
    <button class="burn-button" id="burnButton">Burn Now</button>
    <button id="connectWallet">Connect Wallet</button>
    <p class="burn-address">
      Burn Address: <span>11111111111111111111111111111111</span>
    </p>
  </header>

  <!-- Information Section -->
  <main class="scroll-section">
    <section class="scroll-item">
      <h2>Total Supply</h2>
      <p>The total supply of $BURN is capped at <strong>1 billion tokens</strong>. Controlled burns reduce supply over time.</p>
    </section>
    <section class="scroll-item">
      <h2>Burn Mechanism</h2>
      <p>Each transaction must burn exactly <strong>69420 $BURN tokens</strong>. Incorrect amounts wonâ€™t count.</p>
    </section>
    <section class="scroll-item">
      <h2>Locked Liquidity ðŸ”’</h2>
      <p>Liquidity is permanently locked to provide trust and stability to the ecosystem.</p>
    </section>
    <section class="scroll-item">
      <h2>Magic Eden NFTs</h2>
      <p>Burn $BURN tokens to unlock exclusive NFTs tradable on Magic Eden.</p>
    </section>
    <section class="scroll-item">
      <h2>Future Vision</h2>
      <p>New NFT utilities and use cases may emerge by 2025. Stay tuned for updates! (NFA)</p>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <p>&copy; 2024 $BURN Token Project | Powered by Solana</p>
    <p><a href="/terms">Terms & Conditions</a></p>
  </footer>

  <!-- Wallet and Burn Tool Integration -->
  <script>
    // Phantom Wallet Burn Tool Integration
    document.getElementById("burnButton").addEventListener("click", async () => {
      const burnAmount = 69420; // Amount of tokens to burn
      const burnAddress = "11111111111111111111111111111111"; // Solana burn address
      const tokenMintAddress = "9nGmUbhs1dh1wSgpwo6V25t4J3nmhYPMhAHmjmxZpump"; // Token mint address

      const provider = window.solana;
      if (!provider || !provider.isPhantom) {
        alert("Phantom Wallet is not installed. Please install it to proceed.");
        window.open("https://phantom.app/", "_blank");
        return;
      }

      try {
        await provider.connect();
        const publicKey = provider.publicKey;

        const confirmation = confirm(
          `You are about to burn ${burnAmount} tokens to the Solana burn address. Do you wish to proceed?`
        );

        if (!confirmation) return;

        const connection = new solanaWeb3.Connection(
          solanaWeb3.clusterApiUrl("mainnet-beta"),
          "confirmed"
        );

        // Fetch token accounts by owner
        const tokenAccounts = await connection.getParsedTokenAccountsByOwner(publicKey, {
          mint: new solanaWeb3.PublicKey(tokenMintAddress),
        });

        if (tokenAccounts.value.length === 0) {
          alert("No token account found for the specified SPL token. Ensure you hold the required tokens.");
          return;
        }

        const tokenAccount = tokenAccounts.value[0].pubkey;
        const balanceResponse = await connection.getTokenAccountBalance(tokenAccount);
        const tokenBalance = parseInt(balanceResponse.value.amount);

        if (tokenBalance < burnAmount) {
          alert(`Insufficient balance. You have ${tokenBalance} tokens, but ${burnAmount} are required.`);
          return;
        }

        // Create a burn transaction
        const transaction = new solanaWeb3.Transaction().add(
          splToken.Token.createTransferInstruction(
            splToken.TOKEN_PROGRAM_ID,
            tokenAccount,
            new solanaWeb3.PublicKey(burnAddress),
            publicKey,
            [],
            burnAmount
          )
        );

        const { signature } = await provider.signAndSendTransaction(transaction);
        alert(`Transaction sent! Signature: ${signature}`);

        const confirmationStatus = await connection.confirmTransaction(signature, "confirmed");

        if (confirmationStatus.value.err) {
          throw new Error("Transaction failed during confirmation.");
        }

        alert(`Transaction successful! Signature: ${signature}`);
        console.log(`Transaction Signature: ${signature}`);
      } catch (error) {
        alert(`Error during burn: ${error.message}`);
        console.error("Burn Error:", error);
      }
    });

    // Scroll Animation
    document.addEventListener("DOMContentLoaded", () => {
      const items = document.querySelectorAll(".scroll-item");

      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("active");
            }
          });
        },
        { threshold: 0.5 }
      );

      items.forEach((item) => observer.observe(item));
    });
  </script>
</body>
</html>
